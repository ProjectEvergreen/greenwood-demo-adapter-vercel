<html>
  <head>
    <!-- Greeting API Setup -->
    <script>
      globalThis.addEventListener('DOMContentLoaded', () => {
        globalThis.document.getElementsByTagName('form')[0].addEventListener('submit', async (e) => {
          e.preventDefault();

          const input = document.getElementsByTagName('input')[0].value;
          const data = await fetch(new URL(`/api/greeting?name=${input}`, window.location.href)).then(resp => resp.json());

          document.getElementById('greeting-output').textContent = `${data.message}! ðŸ‘‹`;
        });
      });
    </script>

    <!-- Fragment API Setup -->
    <script>
      globalThis.addEventListener('DOMContentLoaded', () => {
        const page = 5;
        let offset = 0 - page;

        globalThis.document.getElementById('load-artists').addEventListener('click', async () => {
          console.debug('load more artist card fragments!');
          offset = offset += page;
          const html = await fetch(`/api/fragment?offset=${offset}`).then(resp => resp.text());

          document.getElementById('load-artists-output').insertAdjacentHTML('beforeend', html);
        });
      });
    </script>
  </head>

  <body>
    <article>
      <h2>JSON API</h2>
      <p>Owen - include text brefily explaining what this is doing here.</p>
      <form>
        <label>
          Greetings Text
          <input type="text" required/>
        </label>
        <button type="submit">Click me for a greeting!</button>
      </form>
      <h2 id="greeting-output"></h2>
    </article>
    <article>
      <h2>Fragments API (w/ WCC)</h2>
      <p>Owen - include text brefily explaining what this is doing here.</p>
      <div id="load-artists-output" class="artists-cards-contianer" aria-live="polite"></div>
      <button id="load-artists">Load More Artists</button>
    </article>
  </body>
</html>
