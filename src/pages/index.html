<html>
  <head>
    <!-- Greeting API Setup -->
    <script>
      globalThis.addEventListener('DOMContentLoaded', () => {
        globalThis.document.getElementsByTagName('form')[0].addEventListener('submit', async (e) => {
          e.preventDefault();

          const input = document.getElementsByTagName('input')[0].value;
          const data = await fetch(new URL(`/api/greeting?name=${input}`, window.location.href)).then(resp => resp.json());

          document.getElementById('greeting-output').textContent = `${data.message}! ðŸ‘‹`;
        });
      });
    </script>

    <!-- Fragment API Setup -->
    <script>
      globalThis.addEventListener('DOMContentLoaded', () => {
        const page = 5;
        let offset = 0 - page;

        globalThis.document.getElementById('load-artists').addEventListener('click', async () => {
          console.debug('load more artist card fragments!');
          offset = offset += page;
          const html = await fetch(`/api/fragment?offset=${offset}`).then(resp => resp.text());

          document.getElementById('load-artists-output').insertAdjacentHTML('beforeend', html);
        });
      });
    </script>
  </head>

  <body>

    <hr/>

    <h2>JSON API</h2>
    <form>
      <input type="text" required/>
      <button type="submit">Click me for a greeting!</button>
    </form>
    <h2 id="greeting-output"></h2>

    <hr/>

    <h2>Fragments API (w/ WCC)</h2>
    <button id="load-artists">Load More Artists</button>
    <div id="load-artists-output"></div>

    <hr/>

  </body>
</html>